{% extends 'help_desk_base.html' %}

{% block body_content %}
    <form>
        <div class="centered margin-bottom-10">
            <h3 id="title-bar">Scan ID to Sign In or Out</h3>
        </div>
    </form>

    <table id="student-attendance" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th data-toggle="tooltip" data-placement="top" title="Student Name">Name</th>
                <th data-toggle="tooltip" data-placement="top" title="Time Signed Into Session">Time In</th>
                <th data-toggle="tooltip" data-placement="top" title="Time Signed Out Of Session">Time Out</th>
            </tr>
        </thead>
        <tbody id="student-tbody">
            {% include 'student_table.html' %}
        </tbody>
    </table>
    <script>
        $(document).ready(function() {
            let input = "";
            $(document).on('keydown', function(key){
                if(key.keyCode == 13) {
                    let url = "{{ url_for('ShiftsView:verify_scanner') }}";
                    let scannedInput = {
                        'scan': input
                    };
                    $.post(url, scannedInput, function(success) {
                        if(success != 'failed') {
                            $("#student-tbody").html(success);
                            input= "";
                        } else {
                            alert('Failed');
                            input = "";
                        }
                    });
                } else {
                    input = input + key.key;
                }
            });
        });
    </script>
{% endblock %}